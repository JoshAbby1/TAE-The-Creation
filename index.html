<script>
const GEMINI_LINK = "https://ai.studio/apps/drive/1HNgcNJJ7otCBPCyqAI36jLpS6pkh6H7B";

function buildTAEPrompt(){
  const scene  = document.getElementById('scene').value.trim();
  const outfit = document.getElementById('outfit').value.trim();
  const action = document.getElementById('action').value.trim();
  const camera = document.getElementById('camera').value;
  const lighting = document.getElementById('lighting').value;
  const mood = document.getElementById('mood').value;
  const ratio = document.getElementById('ratio').value;

  const background = scene || "studio set or urban backdrop with subtle depth";
  const outfitLine = outfit || "clean, neutral streetwear";
  const sceneLine  = scene || "simple, cinematic scene";
  const actionLine = action ? `Action: ${action}` : null;

  const blocks = [
    `Ratio: ${ratio} (portrait default). Realistic human look, cinematic tone, sharp detail. No text. No watermarks.`,
    `Outfit: ${outfitLine}`,
    `Scene: ${sceneLine}`,
    `Background: ${background}`,
    `Camera: ${camera}`,
    `Lighting: ${lighting}`,
    `Mood: ${mood}`,
    (actionLine || undefined),
    `Negative Prompts: cartoonish, distorted, blurry, deformed hands, duplicated face`
  ].filter(Boolean);

  return blocks.join("\n");
}

function showToast(msg="Copied"){
  const t=document.getElementById('toast');
  t.textContent=msg;
  t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),1200);
}

document.getElementById('generate').addEventListener('click', ()=>{
  const s=document.getElementById('scene').value.trim();
  const o=document.getElementById('outfit').value.trim();
  const a=document.getElementById('action').value.trim();

  if(!s&&!o&&!a){
    document.getElementById('status').textContent="Add at least one detail (scene, outfit, or action).";
    return;
  }
  document.getElementById('status').textContent="Creating TAE promptâ€¦";
  const prompt=buildTAEPrompt();
  document.getElementById('promptBox').textContent=prompt;
  document.getElementById('promptCard').style.display="block";
  document.getElementById('status').textContent="Ready.";
});

document.getElementById('copyBtn').addEventListener('click', async()=>{
  const txt=document.getElementById('promptBox').textContent;
  if(!txt)return;
  try{await navigator.clipboard.writeText(txt);showToast("Prompt copied");}catch{}
});

document.getElementById('openGemini').addEventListener('click',()=>{
  window.open(GEMINI_LINK, '_blank');
});

document.getElementById('readyGemini').addEventListener('click',()=>{
  window.open(GEMINI_LINK, '_blank');
});
</script>
